---
import DetailsList from "../components/DetailsList.astro";
import Layout from "../components/Layout.astro";
import PageTitle from "../components/PageTitle.astro";
import dayjs from "../lib/dayjs";

const title = "記事";

const allPosts = await Astro.glob<{ title: string; publishDate: string }>("./*.md");
allPosts.sort(
	(a, b) =>
		dayjs(b.frontmatter.publishDate).tz().valueOf() -
		dayjs(a.frontmatter.publishDate).tz().valueOf()
);
---

<Layout title={title}>
	<div class="space-y-16">
		<PageTitle title={title} />

		<div class="border-t"></div>

		<div class="container">
			<DetailsList
				items={allPosts.map((post) => ({
					title: post.frontmatter.title,
					link: post.url!,
					meta: `<time datetime="${dayjs(post.frontmatter.publishDate).tz().toISOString()}">
						${dayjs(post.frontmatter.publishDate).tz().format("LL")}
					</time>`,
				}))}
				ordered={true}
			/>
		</div>
	</div>
</Layout>
