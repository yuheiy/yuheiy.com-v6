---
import { getCollection } from 'astro:content';
import DetailsList from '../components/DetailsList.astro';
import PageHeader from '../components/PageHeader.astro';
import Layout from '../layouts/Layout.astro';
import { renderDateToHtml } from '../lib/render-date-to-html';

const title = 'ブログ';

const blogEntries = (await getCollection('blog'))
  .toSorted((a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf())
  .toReversed();
---

<Layout title={title}>
  <PageHeader title={title} />

  <main class="wrapper">
    <DetailsList
      items={blogEntries.map((entry) => ({
        title: entry.data.title,
        link: `/${entry.slug}`,
        meta: renderDateToHtml(entry.data.pubDate),
      }))}
    />
  </main>
</Layout>
