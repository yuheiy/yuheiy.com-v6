---
legacyUrl: true
slug: 2022-08-25-sizing-based-on-multiple-overlapping-elements
title: '複数の要素を重ね合わせつつ、その中で最も大きい要素に合わせて親要素のサイズを設定するCSS'
pubDate: 2022-08-25T23:00:00.000+09:00
---

複数の要素を重ね合わせるためには、従来、`position: absolute`を使うことが多かった。親要素に`position: relative`を、その子要素に`position: absolute`を設定するというもの。

```html
<div style="position: relative;">
  <div style="position: absolute;"><!-- ... --></div>
  <div style="position: absolute;"><!-- ... --></div>
</div>
```

しかしその場合、子要素自身のサイズに基づいて親要素のサイズを設定するということができない。CSSだけでは実現できないので、JavaScriptを使うことになる。

```html
<div style="position: relative; height: 421px;">
  <div style="position: absolute;"><!-- ... --></div>
  <div style="position: absolute;"><!-- ... --></div>
</div>
```

そんなとき、`position: absolute`の代わりにGridを使うと、CSSだけでこれを実現できるようになる。

```html
<div class="wrapper">
  <div><!-- ... --></div>
  <div><!-- ... --></div>
</div>
```

```css
.wrapper {
  display: grid;
}

.wrapper > * {
  grid-row: 1 / -1;
  grid-column: 1 / -1;
}
```

このようにすると、自ずと、最も大きい子要素のサイズに基づいて親要素のサイズが設定されるようになる。

これを使うと、たとえば、ボタンのラベルの長さが変わってもボタン自体の幅は変化しないようにすることができる。

```html demo title="Button" lang="en"
<style>
  button {
    display: inline-grid;
    border: 0;
    border-radius: 0.25em;
    background-color: dodgerblue;
    padding: 0.5em 1em;
    color: white;
  }

  button > * {
    grid-row: 1 / -1;
    grid-column: 1 / -1;
  }

  button[aria-pressed='true'] > :first-child,
  button[aria-pressed='false'] > :last-child {
    visibility: hidden;
  }
</style>

<button
  type="button"
  aria-pressed="false"
  onclick="this.ariaPressed = !(this.ariaPressed === 'true')"
>
  <span>Play</span>
  <span>Pause</span>
</button>
```

あるいは、複数の画像がクロスフェードするギャラリーのようなUIを作成するときに、画像自体に基づいてサイズを設定することもできる。

```html demo title="Gallery" lang="en"
<style>
  body {
    padding: 4px;
  }

  body * {
    outline: 4px solid;
  }

  .wrapper {
    display: grid;
    place-items: center;
    padding: 2em;
    width: fit-content;
  }

  .wrapper > * {
    grid-row: 1 / -1;
    grid-column: 1 / -1;
    transition: 800ms ease-out;
  }

  .wrapper > [aria-hidden='true'] {
    visibility: hidden;
    opacity: 0;
  }
</style>

<script type="module">
  setInterval(() => {
    document.querySelectorAll('img').forEach((el) => {
      el.ariaHidden = !(el.ariaHidden === 'true');
    });
  }, 3000);
</script>

<div class="wrapper">
  <img src="https://picsum.photos/900/1600" width="225" height="400" alt="" />
  <img src="https://picsum.photos/1600/900" width="400" height="225" alt="" aria-hidden="true" />
</div>
```
